<html lang="en">
  <%- include("../partials/head.ejs") %>
  <!-- <style>
    th {
      color: black;
    }

    td {
      color: black;
    }
  </style> -->

  <body>
    <%- include("../partials/datetime.ejs") %>

    <!-- Add rooms -->
    <div id="addRoom">
      <h2>Add Room</h2>
      <form action="/shahporan/admin/add-room" method="POST">
        <div>
          <label for="location">Location</label>
          <input type="text" id="location" name="location">
        </div></br>
        <button type="submit">Add New Room</button>
      </form>
    </div>

    <!-- List rooms -->
    <div id="listRooms">
      <h2>Rooms</h2>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Location</th>
            <th>Edit</th>
          </tr>
        </thead>
        <tbody>
          <% rooms.forEach(function(room) { %>
            <tr>
              <td><%= room.ID %></td>
              <td><%= room.Location %></td>
              <td><button value="<%= room.ID %>" onclick="console.log(this.value)">Edit</button></td>
            </tr>
          <% }); %>
        </tbody>
      </table>      
    </div>

    <!-- Events awaiting approval -->
    <div>
      <h2>Events awaiting approval</h2>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Description</th>
            <th>Date</th>
            <th>Status</th>
            <th>Approve</th>
            <th>Deny</th>
          </tr>
        </thead>
        <tbody>
          <% eventsWaiting.forEach(function(event) { %>
          <tr>
            <td><%= event.ID %></td>
            <td><%= event.Title %></td>
            <td><%= event.Description %></td>
            <td><%= event.Date.toLocaleDateString() %></td>
            <td><%= event.Approved ? 'Approved' : 'Awaiting approval' %></td>
            <td>
              <form action="/approve-event" method="POST">
                <button type="submit" value="<%= event.ID %>">Approve</button>
              </form>
            </td>
            <td>
              <form action="/deny-event" method="POST">
                <button type="submit" value="<%= event.ID %>">Deny</button>
              </form>
            </td>
          </tr>
          <% }); %>
        </tbody>
      </table>  
    </div>
  </body>

  <script>
    const rooms = JSON.parse(`<%- JSON.stringify(rooms) %>`);
    rooms.forEach(room => {
      console.log(room.Location);
    })
  </script>


</html>
